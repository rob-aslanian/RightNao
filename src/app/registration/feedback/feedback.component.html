<div class="feedback-wrapper mt-5">
    <form [formGroup]="feedbackForm" (ngSubmit)='submitForm()' autocomplete="off">
        <div class="profile">
            <div class="feedback-container">

            <div class="feedback-content">
                <h1>FEEDBACK</h1>
                <h5 class="pt-3">
                    We Value Your Opinion
                </h5>
                <p class="mt-3 heading">
                    We are constantly striving to enhance your experience on your platform
                </p>
                <p class="mt-3 heading">
                    We would love to hear from you, to capture your discontent or improve your satisfaction. Please let
                    us know
                </p>


                <div class="feedback-tab">
                        <div  class="emojies-wrapper" [ngClass]="{'emojies-err': feedbackForm.get('reaction').errors && submitedForm }">
                            <ngb-accordion activeIds="ngb-panel-0" (panelChange)='beforeChange( $event )'>
                                <ngb-panel id="ngb-panel-0"  >
                        
                                    <ng-template ngbPanelTitle>
                                    
                                                <span>How would you rate your overall experience?</span>
                                
                                
                                    </ng-template>
                        
                                    <ng-template ngbPanelContent>
                                        <div class="d-flex justify-content-center">

                                            <div class="row mt-2" style="width: 87%;">

                                                <div class="col-2 radio-toolbar"
                                                    *ngFor="let emoji of emojies; let i = index; trackBy:trckByFn">
                                                    <input type="radio" 
                                                            [id]="emoji.id" 
                                                            name="reaction" 
                                                            [value]="emoji.id"
                                                            formControlName="reaction"> 

                                                    <label [for]="emoji.id" 
                                                            style="width: 87%;" 
                                                            class="text-align-center">

                                                        <img [src]="emoji.img" alt="emoji"
                                                            *ngIf="feedbackForm.get('reaction').value !== emoji.id">

                                                        <img [src]="emoji.activeImage" alt="emoji" class="active-image"
                                                            *ngIf="feedbackForm.get('reaction').value === emoji.id">


                                                        <p>{{ emoji.name }}</p>
                                                    </label>
                                                </div>

                                            </div>

                                        </div>

                                    </ng-template>
                            
                                
                                </ngb-panel>
                            </ngb-accordion>
                     </div>
                    <ngb-accordion #acc="ngbAccordion" [closeOthers]="true" (panelChange)='beforeChange( $event )'>

                        <!-- Compliment -->
                        
                        <ngb-panel>

                            <ng-template ngbPanelTitle>
                                <div class="d-flex justify-content-between">
                                    <span>Compliment</span>

                                    <a *ngIf="selectedId !== 'ngb-panel-1'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="up-arrow">
                                    </a>

                                    <a *ngIf="selectedId === 'ngb-panel-1'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="down-arrow">
                                    </a>

                                </div>
                            </ng-template>

                            <ng-template ngbPanelContent>
                             <div formGroupName="compliment">
                                 
                                 <div class="form-group">
                                     <label for="features" class="label-control">What are your favourite features and why?</label>
                                     <textarea class="form-control" id="features"  placeholder="Enter your text here" formControlName="favorite_features"></textarea>
                                 </div>
 
                                 <div class="form-group">
                                         <label for="experience" class="label-control">How can we improve your experience even more? </label>
                                         <textarea class="form-control" id="experience"  placeholder="Enter your text here" formControlName="improve_experience"></textarea>
                                 </div>
 
                                 <div class="form-group">
                                         <label for="tools" class="label-control">Any features, services or tools would you like to have?</label>
                                         <textarea class="form-control" id="tools"  placeholder="Enter your text here" formControlName="services_to_have"></textarea>
                                 </div>

                             </div>

                            </ng-template>
                            


                        </ngb-panel>

                        <!-- Complaint -->
                        <ngb-panel>

                            <ng-template ngbPanelTitle>
                                <div class="d-flex justify-content-between">
                                    <span>Complaint</span>

                                    <a *ngIf="selectedId !== 'ngb-panel-2'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="up-arrow">
                                    </a>

                                    <a *ngIf="selectedId === 'ngb-panel-2'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="down-arrow">
                                    </a>

                                </div>
                            </ng-template>

                            <ng-template ngbPanelContent>
                                <div formGroupName="complaint">
                                        <div class="form-group">
                                            <label for="broken" class="label-control"> What`s broken, what`s or what`s wrong? </label>
                                            <textarea class="form-control" id="broken"  placeholder="Enter your text here" formControlName="missing_or_wrong"></textarea>
                                        </div>
        
                                        <div class="form-group">
                                                <label for="exp" class="label-control">How can we improve your experience even more? </label>
                                                <textarea class="form-control" id="exp"  placeholder="Enter your text here" formControlName="improve_experience"></textarea>
                                        </div>
        
                                        <div class="form-group">
                                                <label for="more" class="label-control">Tell us more</label>
                                                <textarea class="form-control" id="more"  placeholder="Enter your text here" formControlName="tell_us_more"></textarea>
                                        </div>
        
                                </div>
                            </ng-template>

                        </ngb-panel>
                        <!-- Bugs -->
                        <ngb-panel>
                            <ng-template ngbPanelTitle>
                                <div class="d-flex justify-content-between">
                                    <span>Bugs</span>

                                    <a *ngIf="selectedId !== 'ngb-panel-3'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="up-arrow">
                                    </a>

                                    <a *ngIf="selectedId === 'ngb-panel-3'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="down-arrow">
                                    </a>

                                </div>
                            </ng-template>

                            <ng-template ngbPanelContent>
                                    <div class="form-group">
                                            <label for="bugs" class="label-control"> Please report a bug or suggest a solution? </label>
                                            <textarea class="form-control" id="bugs"  placeholder="Enter your text here" formControlName="bugs"></textarea>
                                    </div>

                                    <p>Upload image</p>
                                    <label for="upload" class="label-for-uploading">
                                            Upload
                                    </label>

                                    <input type="file"  id="upload" class="upload-file" (change)='uploadFile($event, "bugs")'>
                                    <div>

                                        <ng-container *ngFor="let item of bugs; let i = index">
                                            <span>
                                                <img [src]="item.file" alt="file" class="file"><a (click)='deleteFile(i, "bugs")'>X</a>
                                            </span>
                                        </ng-container>

                                    </div>
                                
                            </ng-template>

                        </ngb-panel>
                       
                        <!-- I coulnot find -->
                        <ngb-panel>
                            <ng-template ngbPanelTitle>
                                <div class="d-flex justify-content-between">
                                    <span>I could not find</span>

                                    <a *ngIf="selectedId !== 'ngb-panel-4'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="up-arrow">
                                    </a>

                                    <a *ngIf="selectedId === 'ngb-panel-4'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="down-arrow">
                                    </a>

                                </div>
                            </ng-template>

                            <ng-template ngbPanelContent>
                                    <div class="form-group">
                                            <label for="i-couldnot-find" class="label-control"> What were you looking for? </label>
                                            <textarea class="form-control" id="i-couldnot-find"  placeholder="Enter your text here" formControlName="could_not_find"></textarea>
                                    </div>
                            </ng-template>

                        </ngb-panel>

                        <!-- Suggestions -->

                        <ngb-panel>

                            <ng-template ngbPanelTitle>
                                <div class="d-flex justify-content-between">
                                    <span>Suggestions</span>

                                    <a *ngIf="selectedId !== 'ngb-panel-5'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="up-arrow">
                                    </a>

                                    <a *ngIf="selectedId === 'ngb-panel-5'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="down-arrow">
                                    </a>

                                </div>
                            </ng-template>

                            <ng-template ngbPanelContent>
                                 <div formGroupName="suggestion">
                                        <div class="form-group">
                                            <label for="suggest-an-idea" class="label-control"> Suggest an idea </label>
                                            <textarea class="form-control" id="suggest-an-idea"  placeholder="Enter your text here" formControlName="idea"></textarea>
                                        </div>
        
                                        <div class="form-group">
                                                <label for="proposal" class="label-control">Submit a proposal </label>
                                                <textarea class="form-control" id="proposal"  placeholder="Enter your text here" formControlName="proposal"></textarea>
                                        </div>    
                                </div>


                                <label for="upload" class="label-for-uploading" >
                                        Upload
                                </label>

                                <input type="file"  id="upload" class="upload-file" (change)='uploadFile($event, "suggestions")'> 
                                <div>
                                    <ng-container *ngFor="let item of suggestions; let i = index">
                                        <span>
                                            <img [src]="item.file" 
                                                 alt="file" class="file"  
                                                 style="width: 44px; height: 44px;">
                                                 <a (click)='deleteFile(i, "suggestions")' style="right: 16px; top: -27px;">X</a>
                                        </span>
                                    </ng-container>
                                </div>


                            </ng-template>

                        </ngb-panel>

                         <!-- Other -->
                        <ngb-panel>

                            <ng-template ngbPanelTitle>
                                <div class="d-flex justify-content-between">
                                    <span>Other</span>

                                    <a *ngIf="selectedId !== 'ngb-panel-6'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="up-arrow">
                                    </a>

                                    <a *ngIf="selectedId === 'ngb-panel-6'">
                                        <img src="assets/img/disabled-arrow.svg" alt="arrow" class="down-arrow">
                                    </a>

                                </div>
                            </ng-template>

                            <ng-template ngbPanelContent>
                                <div formGroupName="other">
                                        <div class="form-group">
                                            <label for="Subject" class="label-control"> Subject </label>
                                            <input class="form-control input-black" id="Subject"  placeholder="Enter subject" formControlName="subject" >
                                        </div>
        
                                        <div class="form-group">
                                                <label for="feedback" class="label-control">Your feedback </label>
                                                <textarea class="form-control" id="feedback"  placeholder="Enter your text here" formControlName="description"></textarea>
                                        </div>    
                                </div>
                            </ng-template>

                        </ngb-panel>

                    </ngb-accordion>

                </div>
                <div class="d-flex justify-content-end mt-4">
                        <button class="btn btn-primary btn-custom">
                            Submit
                        </button>
                 </div>
            </div>
        </div>

     </div>
     
    </form>
</div>

<app-modal [withoutContent]='true'>
    <div class="white-background pt-2">
        <p>
            We appreciate your feedback
        </p>
    </div>
</app-modal>